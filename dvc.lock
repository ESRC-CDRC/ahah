schema: '2.0'
stages:
  osm_graph:
    cmd: python -m ahah.osm_graph
    outs:
    - path: data/processed/osm/edges.parquet
      md5: 22a0069aa8860feb28d64b9c3b8c737f
      size: 689830562
    - path: data/processed/osm/nodes.parquet
      md5: a8564d094cd005710294bb77c69fe86d
      size: 148667002
    - path: data/raw/osm_pbf/edges.csv
      md5: 85592f35778f83b095cb465147371473
      size: 1528410107
    - path: data/raw/osm_pbf/great-britain-latest.osm.pbf
      md5: 55e1d01607158cb323555f1623266934
      size: 1303152899
    - path: data/raw/osm_pbf/nodes.csv
      md5: 6d7e9124b4ecfa3eb4e815cd20544427
      size: 239634481
  get_nhs:
    cmd: python -m ahah.get_nhs
    outs:
    - path: data/raw/nhs/edispensary.csv
      md5: 125afafb0b65f74b8d842ccc4f678800
      size: 3632947
    - path: data/raw/nhs/egdpprac.csv
      md5: ea8db3c8e63431cd07c12a45ef40c2bf
      size: 1860481
    - path: data/raw/nhs/epraccur.csv
      md5: 257c92fb73edd00fcb03f77a719d74e7
      size: 3266982
    - path: data/raw/nhs/ets.csv
      md5: 458ca420894fa5ad18486a7942724dbe
      size: 6021008
    - path: data/raw/nhs/scotland/dentists.csv
      md5: 053f9422d7f41c4972a649fbe761c703
      size: 124059
    - path: data/raw/nhs/scotland/gpp.csv
      md5: 4e1bc2658cd6bdce116b21f13ac8a0ee
      size: 167311
    - path: data/raw/nhs/scotland/hospitals.csv
      md5: 8e995fe4d4517c8f72b9196253a38981
      size: 38345
    - path: data/raw/nhs/scotland/pharmacies.csv
      md5: 67967e5bd751910f4eb16ac1ba80c3cb
      size: 156110
    - path: data/raw/nhs/wales/pharmacy.xls
      md5: e50d25cef0f2a750f55159f1ad1428f6
      size: 2699264
  process_routing:
    cmd: python -m ahah.process_routing
    deps:
    - path: ./data/raw/onspd/ONSPD_FEB_2022_UK.csv
      md5: d96643019bd1b74c823dc7e99827bc1a
      size: 1348959941
    - path: data/processed/osm/nodes.parquet
      md5: f87669ec9a720324625ee3ff9c0b900d
      size: 46851913
    - path: data/raw/bluespace
      md5: 809b6517d55e952fb50a12a111ad7afc.dir
      size: 1168390324
      nfiles: 428
    - path: data/raw/greenspace/access.shp
      md5: 217231f622e8690d1ea1cc3aec341c6b
      size: 12760320
    - path: data/raw/nhs/edispensary.csv
      md5: 125afafb0b65f74b8d842ccc4f678800
      size: 3632947
    - path: data/raw/nhs/egdpprac.csv
      md5: ea8db3c8e63431cd07c12a45ef40c2bf
      size: 1860481
    - path: data/raw/nhs/epraccur.csv
      md5: 257c92fb73edd00fcb03f77a719d74e7
      size: 3266982
    - path: data/raw/nhs/ets.csv
      md5: 458ca420894fa5ad18486a7942724dbe
      size: 6021008
    - path: data/raw/nhs/scotland/dentists.csv
      md5: 053f9422d7f41c4972a649fbe761c703
      size: 124059
    - path: data/raw/nhs/scotland/gpp.csv
      md5: 4e1bc2658cd6bdce116b21f13ac8a0ee
      size: 167311
    - path: data/raw/nhs/scotland/hospitals.csv
      md5: 8e995fe4d4517c8f72b9196253a38981
      size: 38345
    - path: data/raw/nhs/scotland/pharmacies.csv
      md5: 67967e5bd751910f4eb16ac1ba80c3cb
      size: 156110
    outs:
    - path: data/processed/bluespace.parquet
      md5: 5e1a0d606f003ea0585a3bffff87763e
      size: 28397281
    - path: data/processed/dentists.parquet
      md5: d21fa5f56290732781dc2a4a27c909ab
      size: 44072770
    - path: data/processed/gpp.parquet
      md5: d709f0cc8cf44e991ebe03abe91fd68d
      size: 37044008
    - path: data/processed/greenspace.parquet
      md5: 690d25542de3b7f8d3ea7a9d54a87f77
      size: 37548024
    - path: data/processed/hospitals.parquet
      md5: 1531359545c71cc839d28db1c9c408f2
      size: 29442902
    - path: data/processed/pharmacies.parquet
      md5: 24b8442ff597a0fd8043bc48fadd0ea6
      size: 46420723
    - path: data/processed/postcodes.parquet
      md5: ad43c8c1d00422ce0feb9371e44e178c
      size: 28855720
  process_air:
    cmd: python -m ahah.process_air
    deps:
    - path: data/raw/air/mapno22019.csv
      md5: f128a8d4b0092a6a761e2e4816996a89
      size: 8660103
    - path: data/raw/air/mappm102019g.csv
      md5: 128ec888423a2a1d6e5cc15a56a915e6
      size: 8660504
    - path: data/raw/air/mapso22019.csv
      md5: e86ae1a958288024c62d470e892761e1
      size: 8869828
    - path: data/raw/lsoa/england_lsoa_2011.shp
      md5: fd2766d0c0da64b8ff359704a396b057
      size: 497942736
    outs:
    - path: data/out/lsoa_air.csv
      md5: d8670f2e387ccd43bb5e2331de171e27
      size: 2120883
  greenspace_passive:
    cmd: python -m ahah.greenspace_passive
    deps:
    - path: data/processed/postcodes.parquet
      md5: ae046e203773aad625af5df8a0176b17
      size: 31077227
    - path: data/raw/greenspace/site.shp
      md5: bfc5f161dbfa3c85f331789eb29fa331
      size: 83836752
    outs:
    - path: data/out/greenspace_passive.csv
      md5: c96400b25a802eb9c37a0c535c72c0fb
      size: 115772328
  os_highways:
    cmd: python -m ahah.os_highways
    deps:
    - path: data/raw/os_highways/oproad_gb.gpkg
      md5: a8534588b6a1f6bccf83f046633b50bc
      size: 2382544896
    - path: data/raw/os_highways/strtgi_essh_gb/ferry_line.shp
      md5: 56dd01abf99338e2e0ddd755b87d58c6
      size: 57356
    outs:
    - path: data/processed/osm/edges.parquet
      md5: 687a684dda7db423c4cf320acd427f66
      size: 45879390
    - path: data/processed/osm/nodes.parquet
      md5: f87669ec9a720324625ee3ff9c0b900d
      size: 46851913
